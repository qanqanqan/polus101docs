# Магические/дандер методы

**Дандер методами** называют такие методы классов, которые описывают базовое поведение объектов. Например вывод объектов на экран, их сложение, цикл по объектам и так далее.

Отличительная особенность **дандер методов** - двойное подчеркивание в начале и конце, например, метод `__init__()`. Такой вид подчеркивания называется **дандером**(dunder - double underscore/d-underscore), отсюда и название

Разработка простых классов без **дандер методов** возможна, но они добавят создаваемым классам почти **"магический"** функционал(вот почему их порой называют **магическими**).

Пример: создан класс, представляющий информацию о человеке. У экземпляра класса есть атрибуты - ФИО человека, возраст и другая информация.

Если мы захотим вывести информацию о данном человеке, то это можно сделать тремя способами: либо обратиться напрямую к полям объекта с необходимыми данными, создать собственный метод для отображения или воспользоваться дандер методом, который позволит объекту иметь строковое представление, которое можно использовать напрямую для вывода информации на экран.

___

Рассмотрим все три подхода ниже. Для начала определим сам класс.

```python
class Human:
    def __init__(self, full_name, age, other_info):
        self.full_name = full_name
        self.age = age
        self.other_info = other_info
```

## №1 - вывод на экран атрибутов напрямую

В данном случае можно сделать это следующим образом:
```python
class Human:
    ...

human1 = Human('Alexander the Great', 23, 'literature professor')

print(human1.full_name, human1.age, human1.other_info)
```

Обращаем внимание сразу на то, каким большим становится вывод. Если необходимо несколько раз выводить информацию об объекте в таком формате, то читаемость кода значительно снижается.

К тому же для использования такого вывода пользователю нашего класса необходимо изучить поля объекта чтобы затем отображать их. В случае с большими классами эта задача становится гораздо менее приглядной.

## №2 - вывод на экран в качестве метода класса

Теперь рассмотрим реализацию вывод информации об объекте через метод класса:
```python
class Human:
    ...

    def show_info(self):
        print(self.full_name, self.age, self.other_info)


human1 = Human('Alexander the Great', 23, 'literature professor')

human1.show_info()
```

Гораздо лучше. Читаемость кода возрастает, нет необходимости в изучении полей класса, а так же есть задел на будущее при реализации наследования классов(о том, что такое наследние классов, вы можете прочитать здесь - **[Принципы ООП](oop-principles.md)**).


## №3 - вывод на экран с реализацией дандер-метода

Проверим, возможно ли еще больше улучшить читаемость кода при использовании дандер-метода. К данной конкретной задаче о выводе на экран информации об объекте прекрасно подойдет метод ```__str__()```:
```python
class Human:
    ...

    def __str__(self):
        return f"{self.full_name} {self.age} {self.other_info}"


human1 = Human('Alexander the Great', 23, 'literature professor')

print(human1)
```

В данном случае нет нужды в вызове конкретного метода - можно просто передать объект в функцию ***print()*** и вместо вывода программной информации об объекте, по типу ```<__main__.Human object at 0x00000235ED43BBD0>```, мы получим структурированный вывод информации об объекте в виде строки ```Alexander the Great 23 literature professor```. 

При этом стоит учесть, что объект все так же хранится в переменной ***human1***, это можно проверить воспользовавшись функцией ***type()***. Преобразование объекта в строку(а если точнее, то возврат строки методом ```__str__()``` экземпляра класса) происходит только в функции ***print()***, сам объект не "переформатируется" в строковое представление. Такой же эффект будет происходить при применении встроенных функций Python, таких как ***str()*** и ***format()***.

___

В данной статье был рассмотрен конкретный пример использования дандер метода и изложено преимущество при работе с ним. Но, как уже описывалось ранее, они не являются обязательными при работе с вашими классами.

Также, помимо ```__str__()```, есть еще много других дандер методов, которые помогут облегчить работу с объектами и разработку классов. Список этих методов можно найти в **[официальной документации Python](https://docs.python.org/3/reference/datamodel.html#basic-customization)** или в любой другой статье по дандер(или *магическим*) методам, например, в **[статье от Tproger](https://tproger.ru/articles/gajd-po-magicheskim-metodam-v-python)**.